(function(t){function e(e){for(var a,i,c=e[0],s=e[1],l=e[2],u=0,d=[];u<c.length;u++)i=c[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);h&&h(e);while(d.length)d.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,i=1;i<n.length;i++){var c=n[i];0!==r[c]&&(a=!1)}a&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},i={app:0},r={app:0},o=[];function c(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-3c4ea648":"85327cd7","chunk-b55c5c10":"5d4f0956"}[t]+".js"}function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n={"chunk-3c4ea648":1,"chunk-b55c5c10":1};i[t]?e.push(i[t]):0!==i[t]&&n[t]&&e.push(i[t]=new Promise((function(e,n){for(var a="css/"+({}[t]||t)+"."+{"chunk-3c4ea648":"19f96779","chunk-b55c5c10":"d296f758"}[t]+".css",r=s.p+a,o=document.getElementsByTagName("link"),c=0;c<o.length;c++){var l=o[c],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===a||u===r))return e()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){l=d[c],u=l.getAttribute("data-href");if(u===a||u===r)return e()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=e,h.onerror=function(e){var a=e&&e.target&&e.target.src||r,o=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=a,delete i[t],h.parentNode.removeChild(h),n(o)},h.href=r;var f=document.getElementsByTagName("head")[0];f.appendChild(h)})).then((function(){i[t]=0})));var a=r[t];if(0!==a)if(a)e.push(a[2]);else{var o=new Promise((function(e,n){a=r[t]=[e,n]}));e.push(a[2]=o);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,s.nc&&u.setAttribute("nonce",s.nc),u.src=c(t);var d=new Error;l=function(e){u.onerror=u.onload=null,clearTimeout(h);var n=r[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",d.name="ChunkLoadError",d.type=a,d.request=i,n[1](d)}r[t]=void 0}};var h=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(e)},s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var h=u;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"072f":function(t,e,n){},"098f":function(t,e,n){"use strict";var a=n("1587"),i=n.n(a);i.a},"12ab":function(t,e,n){"use strict";var a=n("f3b8"),i=n.n(a);i.a},"14e0":function(t,e,n){"use strict";var a=n("1e85"),i=n.n(a);i.a},1587:function(t,e,n){},"166c":function(t,e,n){},"1d82":function(t,e,n){"use strict";var a=n("f956"),i=n.n(a);i.a},"1e40":function(t,e,n){"use strict";var a=n("f0e4"),i=n.n(a);i.a},"1e85":function(t,e,n){},"2b4d":function(t,e,n){},"2ffc":function(t,e,n){"use strict";var a=n("3f6e"),i=n.n(a);i.a},3923:function(t,e,n){"use strict";var a=n("072f"),i=n.n(a);i.a},"3a5f":function(t,e,n){"use strict";n("8e6e"),n("ac6a"),n("456d");var a=n("bd86"),i=(n("6762"),n("2fdb"),n("bc3a")),r=n.n(i),o=n("6903"),c="production",s="development",l="production",u="test",d={current:c,isDev:c===s,isProd:c===l,isTest:c===u},h=d;function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(n,!0).forEach((function(e){Object(a["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n.d(e,"d",(function(){return m})),n.d(e,"c",(function(){return g})),n.d(e,"a",(function(){return b})),n.d(e,"b",(function(){return y}));var v=h.isDev?o["a"]:"";function m(t,e){return t.includes(v)||(t=v+t),r()({method:"put",url:t,data:e,headers:{},timeout:o["g"]})}function g(t,e){return t.includes(v)||(t=v+t),r()({method:"post",url:t,data:e,headers:{},timeout:o["g"]})}function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.includes(v)||(t=v+t),r.a.get(t,p({},e))}function y(t,e,n){return t.includes(v)||(t=v+t),b(t,{params:n,headers:{Authorization:e},timeout:o["g"]})}},"3f6e":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("transition",{attrs:{name:"enlarge",mode:"out-in"}},[n("router-view")],1)],1)},r=[],o=(n("8e6e"),n("ac6a"),n("456d"),n("7f7f"),n("bd86")),c=(n("6762"),n("2fdb"),n("bc3a")),s=n.n(c);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(n,!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d="https://api.life1st.me/air";function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.includes(d)||(t=d+t),s.a.get(t,u({},e))}function f(t){var e="".concat(d,"/city"),n=t.id,a=t.name,i=t.country,r="zh_Hans";return s.a.get(e,{params:{id:n,city:a,country:i,lang:r}}).then((function(t){return new Promise((function(e){return e(t.data)}))}))}function p(){var t="/map";return new Promise((function(e){h(t).then((function(t){e(t.data)}))}))}var v={data:function(){return{showBack:!1,showAdd:!1,title:"Air Matters"}},watch:{"$route.path":function(t){this.handleRouteChange(t)}},methods:{handleRouteChange:function(t){switch(t){case"/collection":this.title="收藏的地点",this.showBack=!0,this.showAdd=!0;break;default:this.title="Air Matters",this.showBack=!1}}},created:function(){}},m=v,g=(n("7c55"),n("2877")),b=Object(g["a"])(m,i,r,!1,null,null,null),y=b.exports,w=n("8c4f"),_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home-wrap"},[n("navigator",{attrs:{"show-share":!0}}),t.citys.length>0?n("div",{staticClass:"home"},[t._m(0),t._l(t.citys,(function(t){return n("cityCard",{key:t.name,attrs:{cityInfo:t}})}))],2):n("div",{staticClass:"home"},[n("p",{staticStyle:{margin:"0",padding:"12px 0",color:"#ccc"}},[t._v("No data yet.")])])],1)},C=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title"},[n("p",[t._v("收藏的地点")])])}],O=(n("ac4d"),n("8a81"),n("ee8d")),k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.cityInfo?n("div",{staticClass:"city-card",on:{click:t.toDetail}},[n("div",{staticClass:"main-info"},[n("div",{staticClass:"left"},[n("p",{staticClass:"city-name"},[t._v(t._s(t.cityInfo.name))]),n("div",{staticClass:"aqi"},[n("span",{staticClass:"title"},[t._v("空气质量指数")]),n("span",{staticClass:"value"},[t._v(t._s(t.cityInfo.brief.text))])])]),t.info?n("div",{staticClass:"right"},[n("span",{staticClass:"aqi-num"},[t._v(t._s(t.info.aqi.value))]),n("i",{staticClass:"symbol icon",style:"background: "+t.aqiColor})]):t._e()]),t.info?n("div",{staticClass:"pollutant"},[n("div",{staticClass:"item pm2d5",style:"border-bottom: 2px solid "+t.borderC(t.info.pollutant["PM10"].value)},[n("span",{staticClass:"title"},[t._v("PM2.5")]),n("span",{staticClass:"value"},[t._v(t._s(t.info.pollutant["PM2.5"].value))])]),n("div",{staticClass:"item",style:"border-bottom: 2px solid "+t.borderC(t.info.pollutant["PM10"].value)},[n("span",{staticClass:"title"},[t._v("PM10")]),n("span",{staticClass:"value"},[t._v(t._s(t.info.pollutant["PM10"].value))])]),n("div",{staticClass:"item",style:"border-bottom: 2px solid "+t.borderC(t.info.pollutant["PM10"].value)},[n("span",{staticClass:"title"},[t._v("NO2")]),n("span",{staticClass:"value"},[t._v(t._s(t.info.pollutant["NO2"].value))])])]):t._e()]):t._e()},S=[],j={name:"card",data:function(){return{info:null}},props:{cityInfo:{type:Object}},computed:{aqiColor:function(){var t=this.AQILevel(this.info.aqi.value);return this.color(t)}},methods:{color:function(t){switch(t){case 0:return"#31cd31";case 1:return"#00f";case 2:return"#e02d1c";case 3:return"#000"}},setCityData:function(){var t=this,e={country:this.cityInfo.url_key,city:this.cityInfo.name,id:this.cityInfo.place_id};f(e).then((function(e){t.info=e}))},AQILevel:function(t){var e=0;return e=t<50?0:t>=50&&t<100?1:t>=100&&t<150?2:3,e},AQIGrade:function(t){var e=["优秀","良好","轻度污染","重度污染"];return e[this.AQILevel(t)]},borderC:function(t){var e=this.AQILevel(t);return this.color(e)},toDetail:function(){var t=this.cityInfo.name;this.$router.push("/detail/".concat(t))}},created:function(){}},P=j,L=(n("a3cd"),Object(g["a"])(P,k,S,!1,null,"24da0885",null)),E=L.exports,I=n("d225"),x=n("b0b4"),M=n("3a5f"),A=n("6903"),T=function(){function t(){Object(I["a"])(this,t)}return Object(x["a"])(t,[{key:"collection",value:function(){return Object(M["a"])(A["b"])}},{key:"sort",value:function(t,e){return Object(M["d"])(A["b"],{place_ids:t,password:e})}},{key:"add",value:function(t,e){return Object(M["c"])(A["b"]+"/add",{places:t,password:e})}},{key:"delete",value:function(t,e){return Object(M["c"])(A["b"]+"/delete",{place_ids:t,password:e})}}]),t}(),$=new T,D=n("6b43"),N=(new D["b"](D["a"].COLLECTION_PLACES),{name:"home",data:function(){return{citys:[]}},components:{cityCard:E,navigator:O["a"]},methods:{getHotCitys:function(){var t=["beijing","shanghai","chongqing"],e=this.citys;this.hotCitys=e.filter((function(e){e=e.name.toLowerCase();var n=!0,a=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var c=r.value;if(-1!=e.indexOf(c))return!0}}catch(s){a=!0,i=s}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}}))}},created:function(){var t=this;$.collection().then((function(e){console.log(e),200===e.status&&(t.citys=e.data.places)}))}}),B=N,q=(n("ac0f"),Object(g["a"])(B,_,C,!1,null,"35ced2c4",null)),Q=q.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"about"},[n("navigator",{attrs:{showBack:!0,title:"关于"}}),t._m(0),n("h1",[t._v("Air-Matters")]),n("p",[t._v("This is a personal project.")]),n("p",[t._v("It's unofficial.")])],1)},F=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"describe"},[a("img",{staticClass:"icon",attrs:{src:n("bf6f"),alt:"app-logo"}})])}],H={name:"about",components:{navigator:O["a"]}},Y=H,U=(n("1e40"),Object(g["a"])(Y,R,F,!1,null,"ada14b40",null)),V=U.exports,X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"collection"},[n("navigator",{attrs:{title:t.naviTitle,"show-add":t.isShowAdd,showSearch:t.isShowSearch,showBack:!0},on:{onAddClick:t.handleAddClick}}),n("transition",{attrs:{name:t.transitionName}},[n("router-view",{on:{placeAdd:t.handlePlaceAdd,countryItemClick:t.handleCountryClick,landItemClick:t.handleLandClick}})],1)],1)},z=[];n("a481"),n("28a5");function J(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?J(n,!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}new D["b"](D["a"].COLLECTION_PLACES);var K={name:"collection",components:{navigator:O["a"]},data:function(){return{data:[],isShowAdd:!0,isShowSearch:!1,naviTitle:"",transitionName:"",routeQuery:{}}},computed:{},watch:{$route:function(t,e){this.handleRouteSwitch(t.name);var n=t.path.split("/").length,a=e.path.split("/").length;this.transitionName=n<a?"slide-left":"slide-right"},"$route.query":function(t,e){console.log(e,t)}},methods:{handleRouteSwitch:function(t){switch(t){case"collection-main":this.isShowAdd=!0,this.isShowSearch=!1,this.naviTitle="收藏的地点";break;case"Add":this.isShowAdd=!1,this.isShowSearch=!0;break;default:this.isShowSearch=!1,this.isShowAdd=!1}},handlePlaceAdd:function(t){console.log(t),$.add([t],"fake@pwd"),this.$router.replace({path:"/collection"})},handleLandClick:function(t){var e=Object.keys(this.routeQuery).length;console.log(e),this.routeQuery=G({},this.routeQuery,Object(o["a"])({},"place".concat(e),t)),this.$router.push({name:"Add",query:this.routeQuery})},handleCountryClick:function(t){var e=t.name;this.$router.push({path:"".concat(this.$route.path,"/").concat(e)})},handleAddClick:function(){this.$router.push({path:"/collection/add"})}},mounted:function(){var t=this.$route,e=(t.path,t.name);this.handleRouteSwitch(e)}},W=K,Z=(n("14e0"),Object(g["a"])(W,X,z,!1,null,"a66cc30e",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"collection-main"},[n("dragList",{staticClass:"collection-list",attrs:{data:t.collectionList},on:{dragStart:t.handleDragStart,dragEnd:t.handleDragEnd,dataUpdate:t.handleDataUpdate},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.slotProp;return n("div",{},[n("i",{staticClass:"iconfont garbage-bin",on:{click:function(e){return t.handleRemoveItem(a.data)}}},[t._v("")]),n("span",[t._v(t._s(a.data.name))])])}},{key:"dragItem",fn:function(e){var a=e.dragItem;return[a?n("div",{staticClass:"content"},[n("i",{staticClass:"iconfont garbage-bin"},[t._v("")]),n("span",{staticClass:"data"},[t._v(t._s(a.name))]),n("i",{staticClass:"iconfont drag"},[t._v("")])]):t._e()]}}])}),0===t.collectionList.length?n("div",[t._v("\n    no data yet.\n  ")]):t._e()],1)},nt=[],at=(n("55dd"),n("75fc")),it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ul",{ref:"containor",staticClass:"drag-list",on:{touchmove:t.handleTouchMove,touchend:t.handleTouchEnd}},t._l(t.data,(function(e,a){return n("li",{key:a,ref:e.name,refInFor:!0,staticClass:"drag-item",class:t.dragItem===e?"on-drag":""},[n("div",{staticClass:"content"},[t._t("default",[n("i",{staticClass:"iconfont garbage-bin"},[t._v("")]),n("div",{staticClass:"data"},[n("span",[t._v(t._s(e))])])],{slotProp:{data:e}}),n("i",{staticClass:"iconfont drag",on:{touchstart:function(n){return t.handleTouchStart(e,n)}}},[t._v("\n            \n          ")])],2)])})),0),n("div",{directives:[{name:"show",rawName:"v-show",value:!!t.dragItem,expression:"!!dragItem"}],ref:"dragItem",staticClass:"drag-item drag-show",style:{top:this.dragItemY+"px"}},[t._t("dragItem",[n("div",{staticClass:"content"},[n("i",{staticClass:"iconfont garbage-bin"},[t._v("")]),n("span",{staticClass:"data"},[t._v(t._s(t.dragItem))]),n("i",{staticClass:"iconfont drag"},[t._v("")])])],{dragItem:t.dragItem})],2)])},rt=[],ot=63,ct={name:"dragList",props:{data:{type:Array,default:function(){return[]}},onListChange:{type:Function}},data:function(){return{onMove:!1,moveAble:!1,dragItem:null,dragItemY:null}},mounted:function(){this.storeContextFunc=window.oncontextmenu,window.oncontextmenu=function(){return!1},this.baseTop=this.$refs.containor.offsetTop},beforeDestroy:function(){window.oncontextmenu=this.storeContextFunc},methods:{handleTouchStart:function(t,e){var n=this,a=200;this.dragId=setTimeout((function(){n.$emit("dragStart");var e=n.$refs[t.name][0].offsetTop;n.dragItem=t,n.dragItemY=e}),a)},handleTouchEnd:function(t){this.$emit("dragEnd",this.dragItem),clearTimeout(this.dragId),this.dragItemY=ot*(this.data.indexOf(this.dragItem)+1),this.dragItem=null},handleTouchMove:function(t){t.preventDefault();var e=t.targetTouches,n=this.data.indexOf(this.dragItem);if(e[0]){var a=Math.floor(e[0].pageY-this.baseTop+ot/2),i=Math.floor((a-ot/2)/ot),r=Object(at["a"])(this.data);if(-1!==n&&-1!==i&&i<r.length&&i!==n){var o=[r[i],r[n]];r[n]=o[0],r[i]=o[1],this.$emit("dataUpdate",r)}this.dragItemY=a}}}},st=ct,lt=(n("9832"),Object(g["a"])(st,it,rt,!1,null,null,null)),ut=lt.exports,dt=(new D["b"](D["a"].COLLECTION_PLACES),{name:"CollectionMain",components:{dragList:ut},data:function(){return{collectionList:[]}},methods:{fetchData:function(){var t=this;$.collection().then((function(e){var n=e.status,a=e.data;if(200!==n)throw{err:"network error"};t.collectionList=a.places})).catch((function(t){console.error(t)}))},handleDragStart:function(){this.originCollectionList=Object(at["a"])(this.collectionList)},handleDragEnd:function(t){this.originCollectionList&&this.collectionList.map((function(t){return t.place_id})).join("")!==this.originCollectionList.map((function(t){return t.place_id})).join("")&&$.sort(this.collectionList.map((function(t){return t.place_id})),"fake@pwd"),this.originCollectionList=null},handleDataUpdate:function(t){this.collectionList=t},handleRemoveItem:function(t){if(window.confirm("确认移除".concat(t.name,"?"))){var e=t.place_id,n=Object(at["a"])(this.collectionList).filter((function(t){return t.place_id!==e}));$.delete([e],"fake@pwd"),this.handleDataUpdate(n)}}},mounted:function(){console.log("mount"),this.fetchData()}}),ht=dt,ft=(n("098f"),Object(g["a"])(ht,et,nt,!1,null,"0fd74c9b",null)),pt=ft.exports,vt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},mt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"discovery"},[n("p",[t._v("this is discovery page.")])])}],gt={name:"discovery"},bt=gt,yt=Object(g["a"])(bt,vt,mt,!1,null,"75649b43",null),wt=yt.exports,_t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"air-map"},[n("navigator",{attrs:{"show-share":!0,title:"空气质量地图"}}),n("p",{directives:[{name:"show",rawName:"v-show",value:!t.showChart,expression:"!showChart"}]},[t._v("chart err.")]),n("div",{ref:"map",staticClass:"chart"})],1)},Ct=[];n("6c7b");function Ot(t){return t*Math.PI/180}function kt(t,e,n){var a=n.x,i=n.y,r=n.w,o=n.h,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t.beginPath(),t.arc(a+e,i+e,e,Ot(180),Ot(270)),t.arc(a+r-e,i+e,e,Ot(270),Ot(360)),t.arc(a+r-e,i+o-e,e,Ot(0),Ot(90)),t.arc(a+e,i+o-e,e,Ot(90),Ot(180)),t.lineTo(a,i+e),t.stroke(),c&&(t.fillStyle=c,t.fill())}var St={name:"airMap",components:{navigator:O["a"]},data:function(){return{showChart:!0}},methods:{initChart:function(t){var e=new BMap.Map(this.$refs.map);e.addControl(new BMap.NavigationControl);t[300].place;var n=new BMap.LocalCity;n.get((function(t){e.centerAndZoom(t.center,9)}));var a=new BMap.CanvasLayer({update:i});function i(){var n=this.canvas.getContext("2d");if(n){n.clearRect(0,0,n.canvas.width,n.canvas.height);var a=[];t.forEach((function(t){if(t.place){var e=t.place,n=e.lat,i=e.lon,r=t.latest;n&&i&&a.push({loc:new BMap.Point(i,n),latest:r})}}));for(var i=["#31cd31","#d9d726","#e88019","#e02d1c","#af32ba"],r=0,o=a.length;r<o;r++){var c=15,s=5,l=e.pointToPixel(a[r].loc),u=a[r].latest.readings[0].value/60;u=u>4?4:Math.ceil(u),kt(n,s,{x:l.x,y:l.y,w:c,h:c},i[u]),n.fillStyle="#fff",n.fillText(a[r].latest.readings[0].value,l.x,l.y+s+6,c)}}}e.addOverlay(a)}},mounted:function(){var t=this;p().then((function(e){t.showChart=e.success,e.success&&t.initChart(e.data.map)}))}},jt=St,Pt=(n("1d82"),Object(g["a"])(jt,_t,Ct,!1,null,"2b4d5306",null)),Lt=Pt.exports,Et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ranking"},[n("navigator",{attrs:{"show-share":!0,title:"排行榜"}}),n("p",[t._v("this is ranking page")])],1)},It=[],xt={name:"ranking",components:{navigator:O["a"]}},Mt=xt,At=(n("3923"),Object(g["a"])(Mt,Et,It,!1,null,"5c49e40e",null)),Tt=At.exports,$t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"setting"},[n("navigator",{attrs:{showBack:!0,title:"设置"}}),t._l(t.settingList,(function(e,a){return n("pureList",{key:a,staticClass:"setting-list",attrs:{data:e},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.slotProp;return[n("span",{staticClass:"text"},[t._v(t._s(a.data.name))])]}}],null,!0)})}))],2)},Dt=[],Nt=n("b356"),Bt={name:"setting",components:{navigator:O["a"],pureList:Nt["a"]},data:function(){return{settingList:[[{name:"常见问题",to:"Q&A"}],[{name:"通知",to:"Q&A"},{name:"常驻通知",to:"notification"}],[{name:"设置同步",to:"sync"}],[{name:"空气质量计算标准",to:"aqiStandard"},{name:"显示设置",to:"display"},{name:"去除广告",to:"donate"},{name:"隐私",to:"privacy"}],[{name:"自动刷新",desc:"开启后每十分钟更新一次数据",option:!0}]]}}},qt=Bt,Qt=(n("ded0"),Object(g["a"])(qt,$t,Dt,!1,null,null,null)),Rt=Qt.exports,Ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"city-detail"},[n("p",[t._v("this is city detail page.")]),n("div",{staticClass:"city"},[t._v(t._s(t.cityName))])])},Ht=[],Yt={name:"detail",computed:{cityName:function(){var t=this.$router.params.city;return t}}},Ut=Yt,Vt=Object(g["a"])(Ut,Ft,Ht,!1,null,"7bc2d301",null),Xt=Vt.exports;a["a"].use(w["a"]);var zt=new w["a"]({routes:[{path:"/",redirect:"/home"},{path:"/home",name:"home",component:Q},{path:"/about",name:"about",component:V},{path:"/search",name:"Search",component:function(){return n.e("chunk-3c4ea648").then(n.bind(null,"2d3b"))}},{path:"/collection",name:"collection",component:tt,children:[{path:"add*",name:"Add",component:function(){return n.e("chunk-b55c5c10").then(n.bind(null,"2922"))}},{path:"",name:"collection-main",component:pt}]},{path:"/discovery",name:"discovery",component:wt},{path:"/map",name:"map",component:Lt},{path:"/ranking",name:"ranking",component:Tt},{path:"/setting",name:"setting",component:Rt},{path:"/detail/:city",name:"cityDetail",component:Xt}]}),Jt=n("2f62"),Gt=n("b42f");a["a"].use(Jt["a"]);var Kt=new Jt["a"].Store({state:{},mutations:{},actions:{},modules:{places:Gt["b"]}});a["a"].config.productionTip=!1,new a["a"]({router:zt,store:Kt,render:function(t){return t(y)}}).$mount("#app")},"5c48":function(t,e,n){},6903:function(t,e,n){"use strict";n.d(e,"g",(function(){return a})),n.d(e,"a",(function(){return i})),n.d(e,"f",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return c})),n.d(e,"e",(function(){return s})),n.d(e,"b",(function(){return l}));var a=1e4,i="http://localhost:3000",r="/standard",o="/places",c="/place_search",s={continent:"continent",country:"country",LEVEL:"administrative_area_level_X",locality:"locality",station:"station"},l="/user/collection"},"6b43":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));n("8e6e"),n("ac6a"),n("456d");var a=n("d225"),i=n("b0b4"),r=(n("bd86"),n("75fc"),n("6b54"),n("8ded")),o=n.n(r);function c(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.force;return o.a.get(t)&&!a?(console.error({err:"still has data, if you really want, use set(key, val, {force: true}) to set. Another way, use merge(key, val) to merge two data"}),!1):o.a.set(t,e)}function s(t){return o.a.get(t)}var l={COLLECTION_PLACE_IDS:"collection_place_ids",COLLECTION_PLACES:"collectiono_places"},u=function(){function t(e){Object(a["a"])(this,t),this.key=e,s(e)?this.data=s(e):(this.data=[],c(e,this.data))}return Object(i["a"])(t,[{key:"get",value:function(){return o.a.get(this.key)}},{key:"push",value:function(t){return this.data.push(t),o.a.set(this.key,this.data)}},{key:"replace",value:function(t){return this.data=t,o.a.set(this.key,this.data)}}]),t}();e["b"]=u},"7b12":function(t,e,n){"use strict";var a=n("d225"),i=n("b0b4"),r=n("3a5f"),o=n("6903"),c="/forward",s=function(){function t(){Object(a["a"])(this,t)}return Object(i["a"])(t,[{key:"standard",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cn";return Object(r["b"])(c+o["f"],null,{lang:t})}},{key:"places",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cn";return Object(r["b"])(c+o["c"],null,{place_id:t,lang:e})}},{key:"search",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cn";return t?Object(r["b"])(c+o["d"],null,{content:t,lang:e}):Promise.reject({msg:"miss content params."})}}]),t}();e["a"]=new s},"7c55":function(t,e,n){"use strict";var a=n("5c48"),i=n.n(a);i.a},"826b":function(t,e,n){},9832:function(t,e,n){"use strict";var a=n("166c"),i=n.n(a);i.a},a3cd:function(t,e,n){"use strict";var a=n("2b4d"),i=n.n(a);i.a},ac0f:function(t,e,n){"use strict";var a=n("826b"),i=n.n(a);i.a},afcb:function(t,e,n){},b356:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.data?n("ul",{staticClass:"list"},t._l(t.data,(function(e,a){return n("li",{key:a,staticClass:"item",on:{click:function(n){return t.handleItemClick(e,a)}}},[t._t("default",[n("span",{staticClass:"text"},[t._v(t._s(e))])],{slotProp:{data:e,key:a}})],2)})),0):t._e()},i=[],r={name:"pureList",props:{data:{type:[Array,Object]}},methods:{handleItemClick:function(t,e){this.$emit("itemClick",{data:t,key:e})}}},o=r,c=(n("2ffc"),n("2877")),s=Object(c["a"])(o,a,i,!1,null,"330267ab",null);e["a"]=s.exports},b42f:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));n("8e6e"),n("ac6a"),n("456d");var a=n("bd86"),i=n("7b12");function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(n,!0).forEach((function(e){Object(a["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var c={FETCH_PLACES:"places/fetch_places"},s={state:{places:{},currentPlaces:[],collectionPlaces:[]},mutations:Object(a["a"])({},c.FETCH_PLACES,(function(t,e){var n=e.places,i=e.place_id;t.currentPlaces=n,t.places=o({},t.places,Object(a["a"])({},i,n))})),actions:{fetchPlaces:function(t,e){var n=t.commit;i["a"].fetchPlaces(e).then((function(t){var a=t.status,i=t.data;200===a&&n(c.FETCH_PLACES,{places:i.places,place_id:e})}))}},getters:{}};e["b"]=s;var l=c},b7ba:function(t,e,n){"use strict";var a=n("d259"),i=n.n(a);i.a},bf6f:function(t,e,n){t.exports=n.p+"img/logo.8784e059.png"},d259:function(t,e,n){},ded0:function(t,e,n){"use strict";var a=n("afcb"),i=n.n(a);i.a},ee8d:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navigator"},[n("div",{staticClass:"header"},[n("span",{staticClass:"icon right"},[t.showSearch?n("i",{staticClass:"iconfont search",on:{click:t.openSearch}},[t._v("")]):t._e(),t.showAdd?n("i",{staticClass:"iconfont add",on:{click:function(e){return t.emitClick("onAddClick",e)}}},[t._v("")]):t._e(),t.showShare?n("i",{staticClass:"iconfont share",on:{click:function(e){return t.emitClick("onShareClick",e)}}},[t._v("")]):t._e()]),n("span",{staticClass:"icon left"},[t.showBack?t._e():n("i",{staticClass:"menu",on:{click:t.openMenu}}),t.showBack?n("i",{staticClass:"iconfont go-back",on:{click:t.goBack}},[t._v("")]):t._e()]),n("p",{directives:[{name:"show",rawName:"v-show",value:t.isOnSearch&&t.showSearch,expression:"isOnSearch && showSearch"}],staticClass:"title search"},[n("input",{attrs:{type:"text"},domProps:{value:t.searchValue},on:{keydown:t.emitSearch}})]),n("p",{directives:[{name:"show",rawName:"v-show",value:!t.isOnSearch||!t.showSearch,expression:"!isOnSearch || !showSearch"}],staticClass:"title"},[t._v(t._s(t.title))])]),n("hamburger",{directives:[{name:"show",rawName:"v-show",value:t.isOpenMenu,expression:"isOpenMenu"}],attrs:{isMenuShow:t.isOpenMenu},on:{changeRouter:t.hideMenu,cancelSelect:t.hideMenu}})],1)},i=[],r=(n("a481"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"blank"}},[n("div",{staticClass:"hamburger"},[n("transition",{attrs:{name:"slide-left"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isMenuShow,expression:"isMenuShow"}],staticClass:"content"},[n("div",{staticClass:"header",style:t.setHeaderStyl},[n("div",{staticClass:"user-info",on:{click:t.login}},[n("div",{staticClass:"avatar"},[n("img",{attrs:{src:t.avatarSrc,alt:"user avatar"}})]),n("p",{staticClass:"user-name"},[t._v(t._s(t.userName))])]),n("div",{staticClass:"app-version"},[t._v("\n            Ver "+t._s(t.appVersion)+"\n          ")])]),n("ul",{staticClass:"list",on:{click:t.changeRouter}},[t._l(t.menuList[0],(function(e){return n("li",{key:e.to},[n("router-link",{attrs:{to:e.to,"active-class":"active"}},[n("i",{staticClass:"icon",style:t.setListIcon(e.icon)}),t._v("\n              "+t._s(e.name)+"\n            ")])],1)})),n("li",{staticClass:"line"}),t._l(t.menuList[1],(function(e){return n("li",{key:e.to},[n("router-link",{attrs:{to:e.to,"active-class":"active"}},[n("i",{staticClass:"icon",style:t.setListIcon(e.icon)}),t._v("\n              "+t._s(e.name)+"\n            ")])],1)})),n("li",{staticClass:"line"}),t._l(t.menuList[2],(function(e){return n("li",{key:e.to},[n("router-link",{attrs:{to:e.to,"active-class":"active"}},[n("i",{staticClass:"icon",style:t.setListIcon(e.icon)}),t._v("\n              "+t._s(e.name)+"\n            ")])],1)}))],2)])]),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isMenuShow,expression:"isMenuShow"}],staticClass:"mask",on:{click:t.cancelSelect}})])],1)])}),o=[],c=n("f6a1"),s=n.n(c),l={name:"hamburger",data:function(){return{appVersion:"0.3.2",userName:"未登录",avatarSrc:s.a,menuList:[[{name:"空气质量指数",to:"/home"},{name:"空气质量地图",to:"/map"},{name:"排行榜",to:"/ranking"},{name:"发现",to:"/discovery"}],[{name:"编辑收藏地点列表",to:"/collection"}],[{name:"设置",to:"/setting"},{name:"关于",to:"/about"}]],touch:{start:[],end:[]}}},props:{isMenuShow:{type:Boolean,default:function(){return!1}}},computed:{setHeaderStyl:function(){var t="default";return"background-image: url('".concat(t,"')")}},methods:{cancelSelect:function(){this.$emit("cancelSelect")},changeRouter:function(){this.$emit("changeRouter")},setListIcon:function(t){return"background-image: url('".concat(t,"')")},login:function(){alert("不能登陆现在。")}},created:function(){}},u=l,d=(n("b7ba"),n("2877")),h=Object(d["a"])(u,r,o,!1,null,"339cc312",null),f=h.exports,p={name:"navigator",components:{hamburger:f},props:{showBack:{type:Boolean,default:function(){return!1}},showAdd:{type:Boolean,default:function(){return!1}},showSearch:{type:Boolean,default:function(){return!1}},showShare:{type:Boolean,default:function(){return!1}},title:{type:String,default:function(){return"Air Matters"}}},data:function(){return{isOpenMenu:!1,isOnSearch:!1,searchValue:"",touch:{start:[0,0],end:[0,0]}}},watch:{isOnSearch:function(t){t||(this.isOpenMenu=!1)}},created:function(){this.initTouchEvent()},methods:{openMenu:function(){this.isOpenMenu=!0},hideMenu:function(){this.isOpenMenu=!1},goBack:function(){this.$router.go(-1)},openSearch:function(){console.log("open search"),this.$router.replace({path:"/search"})},emitClick:function(t,e){this.$emit(t,e)},emitSearch:function(t){var e=t.target.key;alert(e),this.$emit("onSearch")},initTouchEvent:function(){var t=this;window.addEventListener("touchstart",(function(e){t.touch.start[0]=e.changedTouches[0].clientX,t.touch.start[1]=e.changedTouches[0].clientY})),window.addEventListener("touchend",(function(e){t.touch.end[0]=e.changedTouches[0].clientX,t.touch.end[1]=e.changedTouches[0].clientY,t.canOpenMenu()}))},canOpenMenu:function(){var t=this.touch.start[0],e=this.touch.end[0],n=this.touch.start[1],a=this.touch.end[1],i=document.body.clientWidth;Math.abs(e-t)>10&&t<i/5&&Math.abs(a-n)<100&&this.openMenu()}}},v=p,m=(n("12ab"),Object(d["a"])(v,a,i,!1,null,"e21302b2",null));e["a"]=m.exports},f0e4:function(t,e,n){},f3b8:function(t,e,n){},f6a1:function(t,e,n){t.exports=n.p+"img/icon-default-avatar.4ab43824.png"},f956:function(t,e,n){}});
//# sourceMappingURL=app.dbd842f3.js.map